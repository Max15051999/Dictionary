<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>Просмотр заметки</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <style>
        .note-content {
            background: white;
            width: 50%;
            margin-left: 25%;
            font-family: 'Times New Roman', 'Verdana', sans-serif;
            font-size: 30px;
            border: 5px solid green;
            border-radius: 20px;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        {% include 'theme.html' %}
        <h1>{{title}}</h1>
        <hr><br>

        {% if msg %}
            <script>
                alert('{{msg}}');
                window.location.href = '../../';
            </script>
        {% endif %}

        <input type="checkbox" id="new-line-chk" disabled onclick="splitText(newLineSymbolInput.value, this.checked);">
        <label for="new-line-chk">Переносить на новую строку после</label>
        <input type="text" id="new-line-symbol-input">

        <h1>Заметка на {{note_lang_name}}</h1>
        <h1>{{note_title}}</h1>
        <p id="note-content-tag" class="note-content">{{note_content}}</p>
        <br><br><br>
        <button onclick="window.location.href = window.location.href.replace('show_note', 'change_note');">Изменить заметку</button><br>
        <a href="../../"><button>Назад</button></a>
    </div>
    <script src="{{url_for('static', filename='scripts/theme.js')}}"></script>
    <script>
        var newLineSymbolInput = document.getElementById('new-line-symbol-input');
        var newLineChk = document.getElementById('new-line-chk');
        var noteContentTag = document.getElementById('note-content-tag');

        newLineSymbolInput.onchange = function() {
            newLineChk.disabled = !(this.value.length > 0);

            if (newLineChk.checked)
                newLineChk.checked = this.value.length > 0;
        };

        function splitText(splitter, isChecked=true) {
            splitter = isChecked ? splitter : '<br>';
            var joiner = isChecked ? '<br>' : splitter;

            var splitterText = `{{note_content}}`.split(splitter).join(joiner);
            noteContentTag.innerHTML = splitterText;
        }
    </script>
</body>
</html>